–ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –∏ –¥–∞–π –º–Ω–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è –∫—É—Ä—Å–æ—Ä –ø—Ä–æ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –∏ –¥–æ–≤–µ–¥–µ–Ω–∏—è –¥–æ —Ä–µ–∞–ª—å–Ω–æ –∫—Ä—É—Ç–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ 
–î—É–º–∞–ª –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ 7m 0s

–ù–∏–∂–µ ‚Äî 5 –≥–æ—Ç–æ–≤—ã—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è Cursor Pro (–∫–∏–¥–∞–π –ø–æ –æ—á–µ—Ä–µ–¥–∏). –û–Ω–∏ –∑–∞—Ç–æ—á–µ–Ω—ã –ø–æ–¥ —Ç–≤–æ–π —Ä–µ–ø–æ 5656-main, –∑–∞–ø—É—Å–∫ —Å—Ç—Ä–æ–≥–æ –Ω–∞ Render, –∏ —Ü–µ–ª—å ‚Äî –¥–æ–≤–µ—Å—Ç–∏ –¥–æ —Ä–µ–∞–ª—å–Ω–æ —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ ‚Äú–ø—Ä–æ–¥—É–∫—Ç–æ–≤–æ–≥–æ‚Äù —Å–æ—Å—Ç–æ—è–Ω–∏—è: –≤—Å–µ —Ç–µ—Å—Ç—ã/verify –∑–µ–ª—ë–Ω—ã–µ, –≤—Å–µ –º–æ–¥–µ–ª–∏ –≤ –º–µ–Ω—é, –≤—Å–µ callback‚Äô–∏ –∂–∏–≤—ã–µ, –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –Ω–µ –ø–∞–¥–∞—é—Ç, 409 –Ω–µ —Å–ª—É—á–∞–µ—Ç—Å—è.

PROMPT 1/5 ‚Äî FIX BUILD (–°–†–û–ß–ù–û): IndentationError + –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

–¢—ã —Ä–∞–±–æ—Ç–∞–µ—à—å –≤ —ç—Ç–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏. –¶–µ–ª—å: —á—Ç–æ–±—ã –ø—Ä–æ–µ–∫—Ç —Ö–æ—Ç—è –±—ã —Å–æ–±–∏—Ä–∞–ª—Å—è –∏ pytest –Ω–∞—á–∏–Ω–∞–ª –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è.

–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:
- –ò—Å–ø—Ä–∞–≤—å IndentationError –≤ bot_kie.py (—Å–µ–π—á–∞—Å –ª–æ–º–∞–µ—Ç –∏–º–ø–æ—Ä—Ç, —Å—Ç—Ä–æ–∫–∞ –æ–∫–æ–ª–æ 12172).
- –ù–ï –æ—Å—Ç–∞–≤–ª—è–π ¬´–ø–æ–ª—É-—É–¥–∞–ª—ë–Ω–Ω—ã–µ¬ª –±–ª–æ–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –æ—Ç—Å—Ç—É–ø–æ–º.
- –ù–∏–∫–∞–∫–∏—Ö —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –º–æ–¥—É–ª–µ–π (–≤—Å–µ –≤—ã–∑–æ–≤—ã Telegram/KIE ‚Äî —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ async runtime/handlers).

–°–î–ï–õ–ê–ô:
1) –û—Ç–∫—Ä–æ–π bot_kie.py –≤–æ–∫—Ä—É–≥ ~12080‚Äì12350 –∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É—Å—Ç—Ä–∞–Ω–∏ –±–ª–æ–∫ —Å –ª–∏—à–Ω–∏–º –æ—Ç—Å—Ç—É–ø–æ–º (seedream/4.5-text-to-image –≤–∞–ª–∏–¥–∞—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –æ—Å—Ç–∞–ª–∞—Å—å ‚Äú–ø–æ–¥ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏‚Äù). –õ–∏–±–æ:
   - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±–µ—Ä–Ω–∏ –≤ if model_id == "seedream/4.5-text-to-image": —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –æ—Ç—Å—Ç—É–ø–∞–º–∏,
   - –ª–∏–±–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏ —ç—Ç–æ—Ç —Ä—É—á–Ω–æ–π –≤–∞–ª–∏–¥–∞—Ç–æ—Ä (–µ—Å–ª–∏ —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è kie_input_adapter/validate_params).
   –ì–ª–∞–≤–Ω–æ–µ: —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω –∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å—Å—è.

2) –ü—Ä–æ–≥–æ–Ω–∏:
   - python -m py_compile bot_kie.py
   - pytest -q
   –∏ —É—Å—Ç—Ä–∞–Ω–∏ –ª—é–±—ã–µ –Ω–æ–≤—ã–µ SyntaxError/IndentationError –µ—Å–ª–∏ –≤—Å–ø–ª—ã–≤—É—Ç.

–ö–†–ò–¢–ï–†–ò–ô –ì–û–¢–û–í–ù–û–°–¢–ò:
- python -m py_compile bot_kie.py –ø—Ä–æ—Ö–æ–¥–∏—Ç
- pytest –Ω–∞—á–∏–Ω–∞–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è (–Ω–µ –ø–∞–¥–∞–µ—Ç –Ω–∞ collection –∏–∑-–∑–∞ –∏–º–ø–æ—Ä—Ç–∞).

PROMPT 2/5 ‚Äî MENU + CALLBACK CONTRACT: –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã/–∫–æ–ª–±—ç–∫–∏ –∫ —Ç–µ—Å—Ç–∞–º

–¶–µ–ª—å: —á—Ç–æ–±—ã —Ç–µ—Å—Ç—ã –º–µ–Ω—é/–∫–æ–ª–±—ç–∫–æ–≤ —Å–æ–≤–ø–∞–ª–∏ —Å —Ä–µ–∞–ª—å–Ω—ã–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º.

–§–ê–ö–¢–´ –ü–û –†–ï–ü–û:
- tests/test_models_menu_coverage.py –æ–∂–∏–¥–∞–µ—Ç, —á—Ç–æ helpers.build_model_keyboard() —Å–æ–∑–¥–∞—ë—Ç callback_data –≤ —Ñ–æ—Ä–º–∞—Ç–µ: "model:<model_id>"
- —Å–µ–π—á–∞—Å helpers.build_model_keyboard –¥–µ–ª–∞–µ—Ç "select_model:<model_id>" ‚Äî —ç—Ç–æ —Å–ª–æ–º–∞–µ—Ç —Ç–µ—Å—Ç—ã.
- bot_kie.py —É–∂–µ —É–º–µ–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å "model:" (–∫–∞—Ä—Ç–æ—á–∫–∞ –º–æ–¥–µ–ª–∏) –∏ "select_model:" (–≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏), –Ω–æ helpers –¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–∞–º.

–°–î–ï–õ–ê–ô:
1) –ò—Å–ø—Ä–∞–≤—å helpers.build_model_keyboard():
   - callback_data –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å "model:<model_id>" (–∏ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–π –ª–∏–º–∏—Ç 64 –±–∞–π—Ç–∞: fallback –ø—Ä–∏ –¥–ª–∏–Ω–Ω—ã—Ö id).
   - —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –æ—Å—Ç–∞–≤—å –Ω–æ—Ä–º–∞–ª—å–Ω—ã–º (emoji + name).
   - –Ω–µ –ª–æ–º–∞–π build_main_menu_keyboard –∏ –¥—Ä—É–≥–∏–µ –º–µ–Ω—é.

2) –í bot_kie.button_callback –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–π –±–µ–∑–æ–ø–∞—Å–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É:
   - "model:<id>" ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É –º–æ–¥–µ–ª–∏ + –∫–Ω–æ–ø–∫–∞ "start:<id>" –∏–ª–∏ "select_model:<id>" (–Ω–æ –±–µ–∑ –ø–∞–¥–µ–Ω–∏–π).
   - "start:<id>" ‚Üí –Ω–∞—á–∞–ª–æ —Ñ–ª–æ—É –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–∏–ª–∏ –¥—Ä—É–∂–µ–ª—é–±–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ), –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ TEST_MODE/DRY_RUN.
   - "select_model:<id>" –∏ –∫–æ—Ä–æ—Ç–∫–∏–µ —Ñ–æ—Ä–º—ã "sel:<...>" —Ç–æ–∂–µ –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å/–Ω–µ –ø–∞–¥–∞—Ç—å.

3) –£–±–µ–¥–∏—Å—å, —á—Ç–æ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ callback_data –æ—Ç–≤–µ—á–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ (answer + —Å–æ–æ–±—â–µ–Ω–∏–µ ‚Äú–∫–Ω–æ–ø–∫–∞ —É—Å—Ç–∞—Ä–µ–ª–∞/–æ–±–Ω–æ–≤–∏ –º–µ–Ω—é‚Äù), –±–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏–π.

–ü–†–û–ì–û–ù:
- pytest -q

–ö–†–ò–¢–ï–†–ò–ô –ì–û–¢–û–í–ù–û–°–¢–ò:
- tests/test_models_menu_coverage.py –∏ tests/test_callbacks_smoke.py –ø—Ä–æ—Ö–æ–¥—è—Ç (–∏–ª–∏ –º–∏–Ω–∏–º—É–º –±–æ–ª—å—à–µ –Ω–µ –ø–∞–¥–∞—é—Ç –∏–∑-–∑–∞ –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è callback_data).

PROMPT 3/5 ‚Äî NEW ENTRYPOINT: —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å create_bot_application(settings) –∏ –Ω–æ—Ä–º–∞–ª—å–Ω—É—é —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é handlers

–¶–µ–ª—å: –≤–∫–ª—é—á–∏—Ç—å ‚Äú–Ω–æ–≤—É—é‚Äù –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É app/main.py –∏ —Å–¥–µ–ª–∞—Ç—å Render-–∑–∞–ø—É—Å–∫ —Å—Ç–∞–±–∏–ª—å–Ω—ã–º, –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ –ª–æ–º–∞—è —Ç–µ—Å—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏–º–ø–æ—Ä—Ç—è—Ç bot_kie.start/button_callback.

–°–î–ï–õ–ê–ô:
1) –í bot_kie.py –¥–æ–±–∞–≤—å async def create_bot_application(settings):
   - –°–æ–∑–¥–∞—ë—Ç telegram.ext.Application (ApplicationBuilder) —Å token –∏–∑ ENV/settings.
   - –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç handlers: CommandHandler('start', start), CallbackQueryHandler(button_callback), MessageHandler –∏ ConversationHandler (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è).
   - –ù–ï –≤—ã–∑—ã–≤–∞–µ—Ç network: –ù–ï start_polling, –ù–ï getMe, –ù–ï getWebhookInfo, –ù–ï setWebhook –≤ create_bot_application.
   - –ù–∏–∫–∞–∫–∏—Ö side-effects –Ω–∞ import.

2) –£–±–µ–¥–∏—Å—å, —á—Ç–æ app/main.py —Å–º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å create_bot_application(settings) –∏ –¥–∞–ª—å—à–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –≤ polling/webhook –ø–æ ENV:
   - BOT_MODE=polling ‚Üí ensure_polling_mode/delete_webhook + start_polling
   - BOT_MODE=webhook ‚Üí set_webhook(WEBHOOK_URL) + —Ç–æ–ª—å–∫–æ –æ–∂–∏–¥–∞–Ω–∏–µ (health server —É–∂–µ –µ—Å—Ç—å)
   (–õ–æ–≥–∏–∫—É –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å –≤ app/main.py, –Ω–æ create_bot_application –æ–±—è–∑–∞–Ω–∞ –±—ã—Ç—å ‚Äú—á–∏—Å—Ç–æ–π‚Äù.)

3) –ü—Ä–æ–≥–æ–Ω–∏:
   - python scripts/verify_project.py
   –∏ —Ñ–∏–∫—Å–∏—Ä—É–π –≤—Å—ë, —á—Ç–æ –ª–æ–º–∞–µ—Ç verify (–æ—Å–æ–±–µ–Ω–Ω–æ: –∏–º–ø–æ—Ä—Ç, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è handlers, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏).

–ö–†–ò–¢–ï–†–ò–ô –ì–û–¢–û–í–ù–û–°–¢–ò:
- python scripts/verify_project.py –ø—Ä–æ—Ö–æ–¥–∏—Ç –¥–æ –∫–æ–Ω—Ü–∞ (–∏–ª–∏ –º–∏–Ω–∏–º—É–º pytest –ø–æ–ª–Ω–æ—Å—Ç—å—é –∑–µ–ª—ë–Ω—ã–π –∏ verify –∏–¥—ë—Ç –¥–∞–ª—å—à–µ –±–µ–∑ –∫—Ä–∞—à–µ–π).

PROMPT 4/5 ‚Äî MODELS REGISTRY CANONICAL: –≤—Å–µ –º–æ–¥–µ–ª–∏, model_type, input_params, –º–µ–Ω—é –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å—ë

–¶–µ–ª—å: —á—Ç–æ–±—ã –º–æ–¥–µ–ª–∏ –≥—Ä—É–∑–∏–ª–∏—Å—å —Å—Ç–∞–±–∏–ª—å–Ω–æ –Ω–∞ Render, –∏ —Ç–µ—Å—Ç—ã –ø—Ä–æ –ø–æ–∫—Ä—ã—Ç–∏–µ –º–æ–¥–µ–ª–µ–π/registry –±—ã–ª–∏ –∑–µ–ª—ë–Ω—ã–µ.

–°–î–ï–õ–ê–ô:
1) –°–¥–µ–ª–∞–π –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∏—Å—Ç–∏–Ω—ã –¥–ª—è –º–æ–¥–µ–ª–µ–π:
   - YAML: models/kie_models.yaml ‚Äî –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (model_type + input_params –±–µ—Ä—ë–º –æ—Ç—Ç—É–¥–∞).
   - –î–æ–ø. –ø–æ–ª—è (name/emoji/pricing) –º–æ–∂–Ω–æ ‚Äú–æ–±–æ–≥–∞—â–∞—Ç—å‚Äù –∏–∑ kie_models.py, –Ω–æ YAML ‚Äî canonical.

2) –ü—Ä–æ–≤–µ—Ä—å app.models.registry.get_models_sync():
   - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π –±–µ–∑ –¥—É–±–ª–µ–π
   - —É –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏ –µ—Å—Ç—å: id, model_type, input_params (dict, –Ω–µ –ø—É—Å—Ç–æ–π)
   - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–¥–µ–ª–µ–π == YAML meta total_models (tests/test_models_registry_has_model_type.py)

3) –í bot_kie —Ñ—É–Ω–∫—Ü–∏–∏:
   - get_categories_from_registry()
   - get_models_by_category_from_registry(category)
   - get_model_by_id_from_registry(model_id)
   –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç—Ä–æ–≥–æ –æ—Ç registry –∏ –Ω–µ —Ä–∞—Å—Ö–æ–¥–∏—Ç—å—Å—è —Å —Ä–µ–∞–ª—å–Ω—ã–º —Å–ø–∏—Å–∫–æ–º.

4) –ü–æ—á–∏–Ω–∏ show_all_models_list —Ç–∞–∫, —á—Ç–æ–±—ã —Ä–µ–∞–ª—å–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å –í–°–ï –º–æ–¥–µ–ª–∏ –∏–∑ registry (tests/test_menu_covers_all_models.py –æ–∂–∏–¥–∞–µ—Ç, —á—Ç–æ –≤—Å–µ model_id –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏).

–ü–†–û–ì–û–ù:
- pytest -q
- python scripts/verify_project.py

–ö–†–ò–¢–ï–†–ò–ô –ì–û–¢–û–í–ù–û–°–¢–ò:
- test_menu_covers_all_models.py + test_models_registry_has_model_type.py –∑–µ–ª—ë–Ω—ã–µ
- –Ω–∏ –æ–¥–Ω–∞ –º–æ–¥–µ–ª—å –Ω–µ —Ç–µ—Ä—è–µ—Ç—Å—è –∏–∑-–∑–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π/—Ñ–∏–ª—å—Ç—Ä–æ–≤.

PROMPT 5/5 ‚Äî RENDER HARDENING + UX ‚Äú–∫–∞–∫ –ø—Ä–æ–¥—É–∫—Ç‚Äù: 409, DRY_RUN, –ø–ª–∞—Ç–µ–∂–∏, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ ‚ÄúKIE‚Äù –≤ UI

–¶–µ–ª—å: –¥–æ–≤–µ—Å—Ç–∏ –¥–æ ‚Äú—Ä–µ–∞–ª—å–Ω–æ –∫—Ä—É—Ç–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞‚Äù: —Å—Ç–∞–±–∏–ª—å–Ω—ã–π Render, —Ö–æ—Ä–æ—à–∏–µ –ª–æ–≥–∏, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π UX, –∏ –Ω–∏–∫–∞–∫–æ–≥–æ –ø–∞–ª–µ–≤–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –ø—Ä–æ KIE –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö.

–°–î–ï–õ–ê–ô:
1) Render stability:
   - –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–π, —á—Ç–æ 409 Conflict –Ω–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–º —Ä–µ—Å—Ç–∞—Ä—Ç–∞–º:
     * singleton lock —Ä–∞–±–æ—Ç–∞–µ—Ç (–∏—Å–ø–æ–ª—å–∑—É–π app.singleton_lock.SingletonLock –∏–ª–∏ app.locking.single_instance, –Ω–æ –Ω–µ –¥–≤–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤ —Ä–∞–Ω—Ç–∞–π–º–µ)
     * ensure_polling_mode —É–¥–∞–ª—è–µ—Ç webhook –ø–µ—Ä–µ–¥ polling
     * Conflict ‚Üí handle_conflict_gracefully ‚Üí sys.exit(0)
   - –≤—Å—ë —ç—Ç–æ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å tests/test_409_conflict_fix.py

2) DRY_RUN/TEST_MODE:
   - –ø—Ä–∏ TEST_MODE=1 –∏–ª–∏ ALLOW_REAL_GENERATION=0 –∑–∞–ø—Ä–µ—Ç–∏ —Ä–µ–∞–ª—å–Ω—ã–µ HTTP –∫ KIE –∏ Telegram (–∫—Ä–æ–º–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ ptb harness).
   - gateway –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å MockKieGateway –≤ —Ç–µ—Å—Ç–∞—Ö.

3) UX:
   - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é: –ø–æ–Ω—è—Ç–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã, ‚Äú–ú–æ–¥–µ–ª–∏‚Äù, ‚Äú–ë–µ—Å–ø–ª–∞—Ç–Ω–æ‚Äù, ‚Äú–ë–∞–ª–∞–Ω—Å‚Äù, ‚Äú–ú–æ–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏‚Äù, ‚Äú–ü–æ–¥–¥–µ—Ä–∂–∫–∞‚Äù.
   - –ö–∞—Ä—Ç–æ—á–∫–∞ –º–æ–¥–µ–ª–∏ (callback model:<id>): –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —á—Ç–æ —É–º–µ–µ—Ç, —á—Ç–æ –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å (prompt/image/video/audio), —Ü–µ–Ω—É, –∫–Ω–æ–ø–∫—É ‚Äú–°—Ç–∞—Ä—Ç‚Äù.
   - –û—à–∏–±–∫–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤: –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –±–µ–∑ traceback.
   - –ù–ï —É–ø–æ–º–∏–Ω–∞–π ‚ÄúKIE/Kie.ai‚Äù –≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ç–µ–∫—Å—Ç–∞—Ö; –≤ –ª–æ–≥–∞—Ö –º–æ–∂–Ω–æ.

4) –ü–ª–∞—Ç–µ–∂–∏:
   - ledger/–±–∞–ª–∞–Ω—Å: –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã (–ø–æ–≤—Ç–æ—Ä callback –Ω–µ —Å–ø–∏—Å—ã–≤–∞–µ—Ç –¥–≤–∞–∂–¥—ã).
   - tests/test_payments_ledger.py –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–π—Ç–∏.

–§–ò–ù–ê–õ:
- python scripts/verify_project.py –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–µ–ª—ë–Ω—ã–º.
- –µ—Å–ª–∏ –≥–¥–µ-—Ç–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç handler‚Äô–∞ –¥–ª—è callback ‚Äî –¥–æ–±–∞–≤—å graceful fallback, –Ω–æ –ª—É—á—à–µ –ø–æ–∫—Ä—ã—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏.


–ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ Cursor –ø—Ä–æ–≥–æ–Ω–∏—Ç PROMPT 1/5, —Å–∫–∏–Ω—å —Å—é–¥–∞ –≤—ã–≤–æ–¥ pytest -q (–æ—à–∏–±–∫–∏/–ø–∞–¥–∞—é—â–∏–µ —Ç–µ—Å—Ç—ã), –∏ —è –¥–∞–º —Ç–µ–±–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π ‚Äú—Ç–æ—á–µ—á–Ω—ã–π‚Äù PROMPT 6 —Å—Ç—Ä–æ–≥–æ –ø–æ–¥ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è —Ñ–µ–π–ª—ã (–±–µ–∑ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –±–µ–∑ –ª–∏—à–Ω–µ–π –±–æ–ª—Ç–æ–≤–Ω–∏).

–µ—â–µ —Å—Ä–∞–∑—É –¥–∞–≤–∞–π —á–µ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å
–î—É–º–∞–ª –Ω–∞ –ø—Ä–æ—Ç—è–∂–µ–Ω–∏–∏ 8m 58s

–ù–∏–∂–µ ‚Äî —á—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ —á–∏–Ω–∏—Ç—å –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å + –≥–æ—Ç–æ–≤—ã–µ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è Cursor Pro (—Ç–∞—Å–∫–∞–º–∏). –Ø –æ—Ä–∏–µ–Ω—Ç–∏—Ä—É—é—Å—å –Ω–∞ —Ç–≤–æ–π —Ç–µ–∫—É—â–∏–π —Ä–µ–ø–æ (Render-first, Dockerfile ‚Üí main_render.py, —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç—É—Ä —á–µ—Ä–µ–∑ python scripts/verify_project.py).

–ß—Ç–æ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å (–±–ª–æ–∫–µ—Ä—ã ‚Äú–Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç / –Ω–µ —Ç–µ—Å—Ç–∏—Ç—Å—è‚Äù)

bot_kie.py –ª–æ–º–∞–µ—Ç —Ç–µ—Å—Ç—ã –∏ –∏–º–ø–æ—Ä—Ç
–°–µ–π—á–∞—Å –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –º–æ–∂–µ—Ç –±—ã—Ç—å sys.exit(1) –∏–∑ env-check / –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ç–æ–∫–µ–Ω–∞, –∞ —Ç–µ—Å—Ç—ã –∏–º–ø–æ—Ä—Ç—è—Ç button_callback.
‚úÖ –ù—É–∂–Ω–æ: –Ω–∏–∫–∞–∫–∏—Ö exit/–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –Ω–∞ import. –í—Å—ë —Ç–æ–ª—å–∫–æ –≤ runtime entrypoint (main_render.py / main()).

bot_kie.py NameError –Ω–∞ –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è—Ö —Ç–∏–ø–æ–≤
–í —Ñ–∞–π–ª–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è Optional, Dict, Any, List –¥–æ –∏–º–ø–æ—Ä—Ç–∞ typing, –±–µ–∑ from __future__ import annotations.
‚úÖ –ù—É–∂–Ω–æ: –¥–æ–±–∞–≤–∏—Ç—å from __future__ import annotations + —Ä–∞–Ω–Ω–∏–π –∏–º–ø–æ—Ä—Ç —Ç–∏–ø–æ–≤.

IndentationError –≤ bot_kie.py (seedream/4.5-text-to-image)
–¢–∞–º –±–ª–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –æ–∫–∞–∑–∞–ª—Å—è —Å –ª–∏—à–Ω–∏–º –æ—Ç—Å—Ç—É–ø–æ–º –∏ –±–µ–∑ if model_id == ...:.
‚úÖ –ù—É–∂–Ω–æ: –æ—Ñ–æ—Ä–º–∏—Ç—å –∫–∞–∫ if model_id == "seedream/4.5-text-to-image": –∏ –æ—Å—Ç–∞–≤–∏—Ç—å –±–ª–æ–∫ –ø–æ–¥ –Ω–∏–º.

Pytest –ø–∞–¥–∞–µ—Ç/–∑–∞–≤–∏—Å–∞–µ—Ç –∏–∑-–∑–∞ ‚Äútimeout mode‚Äù –≤ FakeKieAPI
FakeKieAPI.set_timeout_mode(True) –¥–µ–ª–∞–µ—Ç await asyncio.sleep(100) ‚Äî —Ç–µ—Å—Ç—ã ‚Äú–≤–∏—Å–Ω—É—Ç‚Äù –∏ Render/CI —Ü–∏–∫–ª —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–æ–ª—å—é.
‚úÖ –ù—É–∂–Ω–æ: —Å–¥–µ–ª–∞—Ç—å —Ç–∞–π–º–∞—É—Ç –∫–æ—Ä–æ—á–µ –∏ —É–ø—Ä–∞–≤–ª—è–µ–º—ã–º env (–Ω–∞–ø—Ä–∏–º–µ—Ä 0.2‚Äì1.0s –≤ TEST_MODE).

–°–±–æ—Ä–∫–∞ pytest / –º—É—Å–æ—Ä–Ω—ã–µ test_*.py —Å–∫—Ä–∏–ø—Ç—ã –≤ –∫–æ—Ä–Ω–µ
–í –∫–æ—Ä–Ω–µ –ª–µ–∂–∞—Ç ‚Äú—Å–∫—Ä–∏–ø—Ç—ã‚Äù —Å –∏–º–µ–Ω–µ–º test_*.py (–æ–Ω–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –∫–æ–ª–ª–µ–∫—Ç–∏—Å—å pytest‚Äô–æ–º).
‚úÖ –ù—É–∂–Ω–æ: pytest.ini + –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∏—Ö –≤ scripts/ –∏–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å (–Ω–∞–ø—Ä–∏–º–µ—Ä tools_*.py).

–î—É–±–ª–∏/–º—É—Å–æ—Ä–Ω–∞—è –≤–ª–æ–∂–µ–Ω–Ω–∞—è –ø–∞–ø–∫–∞ 5656-main/ –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∞
–í —Ä–µ–ø–æ –µ—Å—Ç—å –∑–µ—Ä–∫–∞–ª—å–Ω–∞—è –∫–æ–ø–∏—è –∫–æ–¥–∞ –≤ –ø–æ–¥–ø–∞–ø–∫–µ. –≠—Ç–æ –º–µ—à–∞–µ—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏ –º–æ–∂–µ—Ç –ª–æ–º–∞—Ç—å –∏–º–ø–æ—Ä—Ç/–ø—É—Ç—å.
‚úÖ –ù—É–∂–Ω–æ: —É–¥–∞–ª–∏—Ç—å/–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –≤–ª–æ–∂–µ–Ω–Ω—ã–π –¥—É–±–ª—å –∏ –æ—Å—Ç–∞–≤–∏—Ç—å –æ–¥–Ω—É ‚Äú–∏—Å—Ç–∏–Ω—É‚Äù.

PROMPTS –¥–ª—è Cursor Pro (–¥–µ–ª–∞–π –ø–æ –æ—á–µ—Ä–µ–¥–∏)
PROMPT 1 ‚Äî –ü–æ—á–∏–Ω–∏—Ç—å import-time side effects + —Ç–∏–ø—ã –≤ bot_kie.py (—á—Ç–æ–±—ã —Ç–µ—Å—Ç—ã –º–æ–≥–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ç—å)

–ó–∞–¥–∞—á–∞: bot_kie.py –¥–æ–ª–∂–µ–Ω –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ —Ç–µ—Å—Ç–∞—Ö –±–µ–∑ sys.exit, –±–µ–∑ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö ENV, –±–µ–∑ —Ç—è–∂—ë–ª–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞.

–°–¥–µ–ª–∞–π:

–î–æ–±–∞–≤—å from __future__ import annotations –≤ —Å–∞–º—ã–π –≤–µ—Ä—Ö bot_kie.py.

–ü–æ–¥–Ω–∏–º–∏ from typing import Optional, Dict, Any, List –≤ –Ω–∞—á–∞–ª–æ (–¥–æ –ø–µ—Ä–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π —Å –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è–º–∏).

–õ—é–±—ã–µ –¥–µ–π—Å—Ç–≤–∏—è —Ç–∏–ø–∞ log_env_summary(), validate_required_env(), sys.exit(...), –∑–∞–ø—É—Å–∫ polling/webhook/health/server ‚Äî –∑–∞–ø—Ä–µ—â–µ–Ω—ã –Ω–∞ import.

–ü–µ—Ä–µ–Ω–µ—Å–∏ env-check –∏ runtime –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ main() / create_bot_application() / main_render.py, –ª–∏–±–æ –≤–∫–ª—é—á–∞–π –∏—Ö —Ç–æ–ª—å–∫–æ –ø—Ä–∏ RUN_ENV_CHECK=1 –∏ SKIP_CONFIG_INIT!=1.

–ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–π, —á—Ç–æ from bot_kie import button_callback –Ω–µ —Ç—Ä–æ–≥–∞–µ—Ç —Å–µ—Ç—å, –Ω–µ –¥–µ–ª–∞–µ—Ç exit, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç —Ç–æ–∫–µ–Ω.

Acceptance:

python -c "import bot_kie; print('ok')" ‚Üí –ø–µ—á–∞—Ç–∞–µ—Ç ok

TEST_MODE=1 ALLOW_REAL_GENERATION=0 python -m pytest -q tests/ —Å—Ç–∞—Ä—Ç—É–µ—Ç –±–µ–∑ INTERNALERROR

python scripts/verify_project.py –ø—Ä–æ—Ö–æ–¥–∏—Ç –±–ª–æ–∫ pytest

PROMPT 2 ‚Äî –ò—Å–ø—Ä–∞–≤–∏—Ç—å IndentationError / seedream validation –±–ª–æ–∫ (–∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ seedream/4.5-text-to-image)

–ó–∞–¥–∞—á–∞: –ø—Ä–∏–≤–µ—Å—Ç–∏ –≤ –ø–æ—Ä—è–¥–æ–∫ –±–ª–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è seedream/4.5-text-to-image.

–°–¥–µ–ª–∞–π:

–ù–∞–π–¥–∏ –º–µ—Å—Ç–æ, –≥–¥–µ –ø–æ—Å–ª–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø—Ä–æ kie_input_adapter –≤–Ω–µ–∑–∞–ø–Ω–æ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –±–ª–æ–∫:

validate prompt, aspect_ratio, quality

–î–æ–±–∞–≤—å –æ–±—ë—Ä—Ç–∫—É:

if model_id == "seedream/4.5-text-to-image":

–£–±–µ–¥–∏—Å—å, —á—Ç–æ –æ—Ç—Å—Ç—É–ø—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –∏ –ª–æ–≥–∏–∫–∞ —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–∞ —Å –±–ª–æ–∫–æ–º seedream/4.5-edit.

–ù–∏–∫–∞–∫–∏—Ö ‚Äú–≤–∏—Å—è—á–∏—Ö‚Äù –±–ª–æ–∫–æ–≤ –±–µ–∑ if/for/try.

Acceptance:

python -m py_compile bot_kie.py –±–µ–∑ –æ—à–∏–±–æ–∫

python scripts/verify_project.py –Ω–µ –ø–∞–¥–∞–µ—Ç –Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–µ

PROMPT 3 ‚Äî –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å/–ø–æ—á–∏–Ω–∏—Ç—å create_bot_application(settings) (Render-first –∫–æ–Ω—Ç—Ä–∞–∫—Ç)

–ó–∞–¥–∞—á–∞: main_render.py –æ–∂–∏–¥–∞–µ—Ç from bot_kie import create_bot_application. –≠—Ç–æ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ.

–°–¥–µ–ª–∞–π:

–†–µ–∞–ª–∏–∑—É–π async def create_bot_application(settings) -> telegram.ext.Application

–í–Ω—É—Ç—Ä–∏:

—Å–æ–∑–¥–∞–≤–∞–π Application.builder().token(settings.telegram_bot_token).build()

—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π handlers (–∫–æ–º–∞–Ω–¥—ã, callback router, conversation handlers), –Ω–æ –±–µ–∑ –∑–∞–ø—É—Å–∫–∞ polling

–≤–æ–∑–≤—Ä–∞—â–∞–π –≥–æ—Ç–æ–≤—ã–π application

–£–±–µ–¥–∏—Å—å, —á—Ç–æ –∫–æ–¥ handler‚Äô–æ–≤ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ TEST_MODE.

–õ—é–±–∞—è env-–≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞/–∫–ª—é—á–µ–π ‚Äî –Ω–∞ —É—Ä–æ–≤–Ω–µ main_render.py/app.config, –∞ –Ω–µ import-time.

Acceptance:

python -c "from bot_kie import create_bot_application; print(create_bot_application)" –Ω–µ –ø–∞–¥–∞–µ—Ç

–í main_render.py –ø—É—Ç—å build_application() –ø–µ—Ä–µ—Å—Ç–∞—ë—Ç –ø–∏—Å–∞—Ç—å ‚Äúcreate_bot_application not found‚Äù

PROMPT 4 ‚Äî –£—Å–∫–æ—Ä–∏—Ç—å/–ø–æ—á–∏–Ω–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç—É—Ä (FakeKieAPI timeout)

–ó–∞–¥–∞—á–∞: —Ç–µ—Å—Ç—ã –Ω–µ –¥–æ–ª–∂–Ω—ã –≤–∏—Å–µ—Ç—å 100 —Å–µ–∫—É–Ω–¥ –∏–∑-–∑–∞ fake timeout.

–°–¥–µ–ª–∞–π:

–í tests/fakes/fake_kie_api.py –∑–∞–º–µ–Ω–∏ await asyncio.sleep(100) –Ω–∞ —É–ø—Ä–∞–≤–ª—è–µ–º—ã–π —Ç–∞–π–º–∞—É—Ç:

–Ω–∞–ø—Ä–∏–º–µ—Ä sleep_seconds = float(os.getenv("FAKE_TIMEOUT_SLEEP", "0.2"))

–≤ CI/verify –ø—É—Å—Ç—å –±—É–¥–µ—Ç 0.2‚Äì1.0

–î–æ–±–∞–≤—å –∏–º–ø–æ—Ä—Ç os –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

–ù–µ –º–µ–Ω—è–π —Å–µ–º–∞–Ω—Ç–∏–∫—É: ‚Äútimeout mode‚Äù –≤—Å—ë —Ä–∞–≤–Ω–æ –¥–æ–ª–∂–µ–Ω ‚Äú—Ç–æ—Ä–º–æ–∑–∏—Ç—å‚Äù, –Ω–æ –Ω–µ —É–±–∏–≤–∞—Ç—å –ø–∞–π–ø–ª–∞–π–Ω.

Acceptance:

TEST_MODE=1 ALLOW_REAL_GENERATION=0 python -m pytest -q tests/ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –±—ã—Å—Ç—Ä–æ (–Ω–µ > 1‚Äì2 –º–∏–Ω—É—Ç)

PROMPT 5 ‚Äî Pytest hygiene: —á—Ç–æ–±—ã ‚Äú—Å–∫—Ä–∏–ø—Ç—ã‚Äù –≤ –∫–æ—Ä–Ω–µ –Ω–µ –ª–æ–º–∞–ª–∏ —Ç–µ—Å—Ç-—Ä–∞–Ω

–ó–∞–¥–∞—á–∞: –∫–æ—Ä–Ω–µ–≤—ã–µ test_*.py (–∫–æ—Ç–æ—Ä—ã–µ –Ω–µ unit-tests) –Ω–µ –¥–æ–ª–∂–Ω—ã —Å–æ–±–∏—Ä–∞—Ç—å—Å—è pytest‚Äô–æ–º.

–°–¥–µ–ª–∞–π:

–î–æ–±–∞–≤—å pytest.ini:

testpaths = tests

python_files = test_*.py

–ü–µ—Ä–µ–º–µ—Å—Ç–∏ –≤—Å–µ ‚Äú—Å–∫—Ä–∏–ø—Ç—ã‚Äù —Ç–∏–ø–∞ test_all_cheap_models.py, test_free_tools.py, test_system.py –∏–∑ –∫–æ—Ä–Ω—è –≤ scripts/ –∏ –ø–µ—Ä–µ–∏–º–µ–Ω—É–π (–Ω–∞–ø—Ä–∏–º–µ—Ä check_all_cheap_models.py, run_free_tools_check.py).

–û–±–Ω–æ–≤–∏ –ª—é–±—ã–µ —Å—Å—ã–ª–∫–∏ –≤ README/–¥–æ–∫–∞—Ö, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å.

Acceptance:

python -m pytest -q –∑–∞–ø—É—Å–∫–∞–µ—Ç —Ç–æ–ª—å–∫–æ tests/ –∏ –Ω–µ –ø–∞–¥–∞–µ—Ç –∏–∑-–∑–∞ sys.stdout/—Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

PROMPT 6 ‚Äî –£–¥–∞–ª–∏—Ç—å/–æ–±–µ–∑–≤—Ä–µ–¥–∏—Ç—å –¥—É–±–ª—å –ø–∞–ø–∫–∏ 5656-main/ –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∞

–ó–∞–¥–∞—á–∞: –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ–¥–Ω–∞ –∫–æ–ø–∏—è –∫–æ–¥–∞.

–°–¥–µ–ª–∞–π:

–£–¥–∞–ª–∏ –≤–ª–æ–∂–µ–Ω–Ω—É—é –ø–∞–ø–∫—É ./5656-main/ (–≥–¥–µ –ª–µ–∂–∏—Ç –¥—É–±–ª—å app/, tests/, requirements.txt –∏ —Ç.–¥.)

–ï—Å–ª–∏ –Ω–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å (–∏—Å—Ç–æ—Ä–∏—è/–∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã) ‚Äî –¥–æ–±–∞–≤—å .gitignore + —É–±–µ–¥–∏—Å—å, —á—Ç–æ –æ–Ω–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–º–ø–æ—Ä—Ç–∞–º–∏/–ø—É—Ç—è–º–∏.

–ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ Dockerfile –∏ main_render.py —Ä–∞–±–æ—Ç–∞—é—Ç –∏–∑ –∫–æ—Ä–Ω—è.

Acceptance:

find . -maxdepth 2 -type d -name "5656-main" –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ (–∏–ª–∏ —Ç–æ–ª—å–∫–æ –∫–æ—Ä–µ–Ω—å —Ä–µ–ø–æ, –±–µ–∑ –¥—É–±–ª—è)

python scripts/verify_project.py –ø—Ä–æ—Ö–æ–¥–∏—Ç

–°–∞–º–æ–µ –≤–∞–∂–Ω–æ–µ –¥–ª—è Render (—á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ ‚Äú–Ω–∏—Ö—É—è –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç‚Äù)

–ó–∞–ø—É—Å–∫ –¥–æ–ª–∂–µ–Ω –∏–¥—Ç–∏ —á–µ—Ä–µ–∑ Dockerfile ‚Üí CMD ["python3","main_render.py"] (—É —Ç–µ–±—è —Ç–∞–∫ –∏ –µ—Å—Ç—å).

–õ—é–±–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ ENV –¥–æ–ª–∂–Ω–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –≤ app.config/get_settings(validate=True) –∏–ª–∏ –≤ main_render.py, –∞ –Ω–µ –≤ bot_kie.py –Ω–∞ import.

–í TEST_MODE –≤—Å—ë –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ —Ç–æ–∫–µ–Ω–æ–≤/–±–µ–∑ —Å–µ—Ç–∏/–±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–ø–∏—Å–∞–Ω–∏–π.

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º –¥–∞–º –µ—â—ë 3 –ø—Ä–æ–º–ø—Ç–∞ —É–∂–µ –Ω–µ –ø—Ä–æ ‚Äú–ø–æ—á–∏–Ω–∏—Ç—å‚Äù, –∞ –ø—Ä–æ ‚Äú—Å–¥–µ–ª–∞—Ç—å —Ä–µ–∞–ª—å–Ω–æ –∫—Ä—É—Ç–æ‚Äù: UX –º–µ–Ω—é/–ø–∞–≥–∏–Ω–∞—Ü–∏—è, –µ–¥–∏–Ω—ã–π —Ä–µ–µ—Å—Ç—Ä 47 –º–æ–¥–µ–ª–µ–π —Å model_type, –∏ –∞–≤—Ç–æ–ø–∏–ª–æ—Ç ‚Äú–ª–æ–≥ Render ‚Üí —Ñ–∏–∫—Å ‚Üí verify ‚Üí deploy‚Äù –±–µ–∑ —Ç–≤–æ–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π.

–¥–∞–≤–∞–π

–û–∫ ‚Äî –¥–µ—Ä–∂–∏ –µ—â—ë 3 –ø—Ä–æ–º–ø—Ç–∞ (7‚Äì9) —É–∂–µ –ø—Ä–æ ‚Äú—Ä–µ–∞–ª—å–Ω–æ –∫—Ä—É—Ç–æ‚Äù (UX + 47 –º–æ–¥–µ–ª–µ–π + –∞–≤—Ç–æ–ø–∏–ª–æ—Ç Render). –ö–∏–¥–∞–π –≤ Cursor Pro –ø–æ –æ—á–µ—Ä–µ–¥–∏.

PROMPT 7/9 ‚Äî UX PRODUCT MODE: –º–µ–Ω—é, –∫–∞—Ä—Ç–æ—á–∫–∏ –º–æ–¥–µ–ª–µ–π, –ø–∞–≥–∏–Ω–∞—Ü–∏—è, –ø–æ–∏—Å–∫, –±–µ–∑ –ø–∞–ª–µ–≤–Ω—ã—Ö —É–ø–æ–º–∏–Ω–∞–Ω–∏–π KIE

–¶–ï–õ–¨:
–°–¥–µ–ª–∞—Ç—å –±–æ—Ç–∞ ‚Äú–∫–∞–∫ –ø—Ä–æ–¥—É–∫—Ç‚Äù: —É–¥–æ–±–Ω–æ–µ –º–µ–Ω—é, —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π –Ω–µ –∞–¥—Å–∫–∏–π, –∫–∞—Ä—Ç–æ—á–∫–∏ –º–æ–¥–µ–ª–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ, –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Å—Ç–∞–±–∏–ª—å–Ω–∞—è. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –¥–æ–ª–∂–µ–Ω –≤–∏–¥–µ—Ç—å —Å–ª–æ–≤–∞ KIE/Kie.ai –Ω–∏–≥–¥–µ –≤ UI (–≤ –ª–æ–≥–∞—Ö –º–æ–∂–Ω–æ).

–°–î–ï–õ–ê–ô:
1) –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:
- –ö–Ω–æ–ø–∫–∏: "‚ö°Ô∏è –ú–æ–¥–µ–ª–∏", "üéÅ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ", "üí≥ –ë–∞–ª–∞–Ω—Å", "üßæ –ú–æ–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏", "üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞"
- –ú–µ–Ω—é –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –µ–¥–∏–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º, –±–µ–∑ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –∫–ª–∞–≤–∏–∞—Ç—É—Ä –ø–æ –ø—Ä–æ–µ–∫—Ç—É.

2) –≠–∫—Ä–∞–Ω "–ú–æ–¥–µ–ª–∏":
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ (–∏–∑ registry): Text, Image, Video, Audio, Edit/Tools (–µ—Å–ª–∏ –µ—Å—Ç—å).
- –í–Ω—É—Ç—Ä–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: –ø–∞–≥–∏–Ω–∞—Ü–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä 10‚Äì12 –º–æ–¥–µ–ª–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É) + –∫–Ω–æ–ø–∫–∏ "‚¨ÖÔ∏è" "‚û°Ô∏è" + "üîé –ü–æ–∏—Å–∫".
- Callback contract:
  - category:<cat>:<page>
  - model:<model_id>
  - search:models (–≤–∫–ª—é—á–∞–µ—Ç —Ä–µ–∂–∏–º –≤–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º)

3) –ö–∞—Ä—Ç–æ—á–∫–∞ –º–æ–¥–µ–ª–∏ (callback model:<id>):
- –ù–∞–∑–≤–∞–Ω–∏–µ, —Ç–∏–ø (–º—è–≥–∫–æ: ‚Äú–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è/–≤–∏–¥–µ–æ/—Ç–µ–∫—Å—Ç–∞‚Äù), –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ, —Ü–µ–Ω–∞/–∫—Ä–µ–¥–∏—Ç—ã, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è, –Ω—É–∂–Ω—ã–µ –≤—Ö–æ–¥—ã.
- –ö–Ω–æ–ø–∫–∏: "üöÄ –°—Ç–∞—Ä—Ç", "‚≠êÔ∏è –í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ", "‚¨ÖÔ∏è –ù–∞–∑–∞–¥"
- "–°—Ç–∞—Ä—Ç" –≤–µ–¥—ë—Ç –≤ –µ–¥–∏–Ω—ã–π flow –≤–≤–æ–¥–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (prompt/negative_prompt/seed/ratio –∏ —Ç.–ø.) —á–µ—Ä–µ–∑ input_adapter.

4) –ü–æ–∏—Å–∫:
- –†–µ–∂–∏–º –ø–æ–∏—Å–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ user_state: –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç —Ç–µ–∫—Å—Ç ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ–ø-—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (—Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ id/name/tags).
- –ö–Ω–æ–ø–∫–∞ ‚Äú‚ùå –°–±—Ä–æ—Å–∏—Ç—å –ø–æ–∏—Å–∫‚Äù.

5) –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å:
- –õ—é–±–æ–π –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π callback –¥–æ–ª–∂–µ–Ω –æ—Ç–≤–µ—á–∞—Ç—å—Å—è –±–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏–π.
- –°–æ—Ö—Ä–∞–Ω—è–π last_menu_state (category/page/search), —á—Ç–æ–±—ã ‚Äú–ù–∞–∑–∞–¥‚Äù —Ä–∞–±–æ—Ç–∞–ª–æ.

–ü–†–û–ì–û–ù:
- pytest -q
- python scripts/verify_project.py

–ö–†–ò–¢–ï–†–ò–ô:
- –í—Å–µ –∫–Ω–æ–ø–∫–∏ –∏–∑ UI —Ä–µ–∞–ª—å–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã.
- –¢–µ—Å—Ç—ã –Ω–µ –ø–∞–¥–∞—é—Ç.
- –í –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö —Ç–µ–∫—Å—Ç–∞—Ö –Ω–µ—Ç "KIE", "Kie.ai", "kie".

PROMPT 8/9 ‚Äî MODELS CANONICAL + 47 MODELS GUARANTEE: –µ–¥–∏–Ω—ã–π registry, model_type, input_params, –º–µ–Ω—é –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ –º–æ–¥–µ–ª–∏

–¶–ï–õ–¨:
–ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –í–°–ï –º–æ–¥–µ–ª–∏ (–æ–∂–∏–¥–∞–µ—Ç—Å—è 47) –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç, —É –∫–∞–∂–¥–æ–π –µ—Å—Ç—å model_type –∏ input_params, –∏ –º–µ–Ω—é –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ model_id.

–°–î–ï–õ–ê–ô:
1) –°–¥–µ–ª–∞–π models/kie_models.yaml –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –ø—Ä–∞–≤–¥—ã:
- –£ –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏ –æ–±—è–∑–∞–Ω—ã –±—ã—Ç—å:
  - id
  - name (—á–∏—Ç–∞–µ–º–æ–µ)
  - model_type (text_to_image / image_to_image / text_to_video / text / audio / tool / etc.)
  - input_params (dict: –ø–∞—Ä–∞–º–µ—Ç—Ä—ã/—Ç–∏–ø—ã/required/default/range)
  - category (–¥–ª—è –º–µ–Ω—é)

2) app.models.registry:
- get_models_sync() –¥–æ–ª–∂–µ–Ω —á–∏—Ç–∞—Ç—å YAML –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π –±–µ–∑ –¥—É–±–ª–µ–π.
- –°—Ç–∞–±–∏–ª—å–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫: category –∑–∞—Ç–µ–º name.
- –î–æ–±–∞–≤—å schema-validation (pydantic –∏–ª–∏ —Ä—É—á–Ω–∞—è), —á—Ç–æ–±—ã –ø—Ä–∏ –æ—à–∏–±–∫–µ YAML –ø–∞–¥–∞–ª–æ –ø–æ–Ω—è—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º (–Ω–æ —Ç–æ–ª—å–∫–æ –≤ runtime, –Ω–µ –Ω–∞ import –≤ —Ç–µ—Å—Ç–∞—Ö).

3) bot_kie –º–µ–Ω—é:
- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Å—Ç—Ä–æ—è—Ç—Å—è –ø–æ field category –∏–∑ registry.
- show_all_models_list –¥–æ–ª–∂–µ–Ω –ø–æ–∫—Ä—ã–≤–∞—Ç—å 100% –º–æ–¥–µ–ª–µ–π: –∫–∞–∂–¥–∞—è –º–æ–¥–µ–ª—å –∏–∑ registry –¥–æ—Å—Ç—É–ø–Ω–∞ —á–µ—Ä–µ–∑ –º–µ–Ω—é/–∫–∞—Ç–µ–≥–æ—Ä–∏—é.
- helpers.build_model_keyboard –¥–æ–ª–∂–µ–Ω —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å callback "model:<id>"

4) –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:
- –°–æ—Ö—Ä–∞–Ω–∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å—Ç–∞—Ä—ã—Ö callback —Ñ–æ—Ä–º–∞—Ç–æ–≤ ("select_model:<id>", "sel:<id>") –∫–∞–∫ –∞–ª–∏–∞—Å—ã.
- –ù–æ canonical ‚Äî "model:<id>"

–ü–†–û–ì–û–ù:
- pytest -q (–æ—Å–æ–±–µ–Ω–Ω–æ tests/test_models_registry_has_model_type.py –∏ tests/test_menu_covers_all_models.py)
- python scripts/verify_project.py

–ö–†–ò–¢–ï–†–ò–ô:
- 47 –º–æ–¥–µ–ª–µ–π –≤ registry (–∏–ª–∏ —Å—Ç–æ–ª—å–∫–æ, —Å–∫–æ–ª—å–∫–æ –∑–∞—è–≤–ª–µ–Ω–æ –≤ YAML meta total_models).
- –£ –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏ –∑–∞–ø–æ–ª–Ω–µ–Ω—ã model_type –∏ input_params.
- –ú–µ–Ω—é –ø–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ –º–æ–¥–µ–ª–∏.

PROMPT 9/9 ‚Äî RENDER AUTOPILOT: –ª–æ–≥-—Ü–∏–∫–ª ‚Äú–¥–µ–ø–ª–æ–π ‚Üí –ª–æ–≥–∏ ‚Üí —Ñ–∏–∫—Å ‚Üí verify ‚Üí –¥–µ–ø–ª–æ–π‚Äù + –∑–∞—â–∏—Ç–∞ –æ—Ç 409

–¶–ï–õ–¨:
–°–¥–µ–ª–∞—Ç—å –∞–≤—Ç–æ–ø–∏–ª–æ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤–Ω—É—Ç—Ä–∏ —Ä–µ–ø–æ: –æ–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç/–∫–æ–º–∞–Ω–¥–∞, –∫–æ—Ç–æ—Ä—ã–π:
- —á–∏—Ç–∞–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏ Render (–∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ logs/*.log),
- –ø–∞—Ä—Å–∏—Ç traceback/–æ—à–∏–±–∫–∏,
- –ø—Ä–∏–º–µ–Ω—è–µ—Ç —Ç–æ—á–µ—á–Ω—ã–µ —Ñ–∏–∫—Å—ã,
- –∑–∞–ø—É—Å–∫–∞–µ—Ç python scripts/verify_project.py,
- –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –¥–æ –∑–µ–ª—ë–Ω–æ–≥–æ.

–û–ì–†–ê–ù–ò–ß–ï–ù–ò–Ø:
- –ù–∏–∫–∞–∫–∏—Ö —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –∫–æ–¥–µ.
- –ù–∏–∫–∞–∫–∏—Ö –≤–Ω–µ—à–Ω–∏—Ö API-–∫–ª—é—á–µ–π/Render —Ç–æ–∫–µ–Ω–æ–≤ –≤ —Ä–µ–ø–æ.
- –ï—Å–ª–∏ –Ω–µ—Ç Render API, —Ä–∞–±–æ—Ç–∞–π —Å –ª–æ–∫–∞–ª—å–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ª–æ–≥–∏ –¥–µ–ø–ª–æ—è –≤ logs/render_latest.log).

–°–î–ï–õ–ê–ô:
1) scripts/autopilot.py:
- –í—Ö–æ–¥: –ø—É—Ç—å –∫ –ª–æ–≥-—Ñ–∞–π–ª—É (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é logs/render_latest.log)
- –§—É–Ω–∫—Ü–∏–∏:
  - parse_errors(log_text) ‚Üí —Å–ø–∏—Å–æ–∫ {type, file, line, message, traceback}
  - propose_fixes(errors) ‚Üí —Å–ø–∏—Å–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π (patch plan)
  - apply_fixes(plan) ‚Üí –ø—Ä–∞–≤–∫–∏ —Ñ–∞–π–ª–æ–≤ (–∞–∫–∫—É—Ä–∞—Ç–Ω–æ, –∞—Ç–æ–º–∞—Ä–Ω–æ)
  - run_verify() ‚Üí –∑–∞–ø—É—Å–∫–∞–µ—Ç verify_project.py, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—ã–≤–æ–¥ –≤ logs/verify_latest.log

2) –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:
- –í Render: –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –º–æ–∂–Ω–æ —Ä—É–∫–∞–º–∏ —Å–∫–∞—á–∞—Ç—å –ª–æ–≥ –∏ –ø–æ–ª–æ–∂–∏—Ç—å –≤ logs/render_latest.log ‚Üí –ø—Ä–æ–≥–Ω–∞—Ç—å autopilot –ª–æ–∫–∞–ª—å–Ω–æ.
- –î–æ–±–∞–≤—å Makefile –∫–æ–º–∞–Ω–¥—ã:
  - make verify
  - make autopilot

3) 409 Conflict hardening:
- –£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤ runtime –µ—Å—Ç—å –µ–¥–∏–Ω—ã–π —Å–ø–æ—Å–æ–±:
  - polling ‚Üí deleteWebhook –ø–µ—Ä–µ–¥ start_polling
  - Conflict ‚Üí sys.exit(0)
  - singleton lock –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç

–ü–†–û–ì–û–ù:
- pytest -q
- python scripts/verify_project.py
- python scripts/autopilot.py logs/render_latest.log (–¥–æ–ª–∂–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –∏ –Ω–µ –ø–∞–¥–∞—Ç—å)

–ö–†–ò–¢–ï–†–ò–ô:
- –ê–≤—Ç–æ–ø–∏–ª–æ—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è, –ø–∏—à–µ—Ç –ø–æ–Ω—è—Ç–Ω—ã–π –æ—Ç—á—ë—Ç –∏ –Ω–µ –ª–æ–º–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç.
- verify_project.py –∑–µ–ª—ë–Ω—ã–π.


–ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äú—É–ª—å—Ç—Ä–∞ —Ä–µ–∂–∏–º‚Äù (—á—Ç–æ–±—ã Cursor –≤–æ–æ–±—â–µ –Ω–µ —Å–ø—Ä–∞—à–∏–≤–∞–ª –Ω–∏—á–µ–≥–æ –∏ —Å–∞–º –¥–µ–ª–∞–ª —Ü–∏–∫–ª –¥–æ –∑–µ–ª—ë–Ω–æ–≥–æ), –≤–æ—Ç –∫–æ—Ä–æ—Ç–∫–∞—è –æ–±–≤—è–∑–∫–∞-–∫–æ–º–∞–Ω–¥–∞, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ –≤—Å—Ç–∞–≤–∏—Ç—å –≤ Cursor –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ç–∞—Å–∫:

EXTRA ‚Äî ULTRA LOOP (Cursor self-loop)
–ó–∞–ø—É—Å—Ç–∏ —Ü–∏–∫–ª –¥–æ –∑–µ–ª—ë–Ω–æ–≥–æ:
1) pytest -q
2) python scripts/verify_project.py
–ï—Å–ª–∏ –µ—Å—Ç—å —Ñ–µ–π–ª—ã ‚Äî –ø—Ä–æ—á–∏—Ç–∞–π traceback, –∏—Å–ø—Ä–∞–≤—å –∫–æ–¥, –¥–æ–±–∞–≤—å/–æ–±–Ω–æ–≤–∏ —Ç–µ—Å—Ç—ã –µ—Å–ª–∏ –Ω—É–∂–Ω–æ, –ø–æ–≤—Ç–æ—Ä—è–π. 